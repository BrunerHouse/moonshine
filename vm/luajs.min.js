var luajs=luajs||{};luajs.EventEmitter=function(){this._listeners={}};luajs.EventEmitter.prototype._trigger=function(b,e){var d=this._listeners[b],a,c;if(!d){return}if(!((e||{}) instanceof Array)){e=[e]}for(c in d){a=d[c].apply(this,e);if(a!==undefined&&!a){break}}};luajs.EventEmitter.prototype.bind=function(a,b){if(!this._listeners[a]){this._listeners[a]=[]}this._listeners[a].push(b)};luajs.EventEmitter.prototype.unbind=function(a,c){for(var b in this._listeners[a]){if(this._listeners[a][b]===c){this._listeners[a].splice(b,1)}}};var luajs=luajs||{};luajs.VM=function(a){luajs.EventEmitter.call(this);this._files=[];this._env=a||{};this._coroutineStack=[];this._resetGlobals()};luajs.VM.prototype=new luajs.EventEmitter();luajs.VM.prototype.constructor=luajs.VM;luajs.VM.prototype._resetGlobals=function(){this._globals={};for(var a in luajs.lib){this._globals[a]=luajs.lib[a]}for(var a in this._env){this._globals[a]=this._env[a]}};luajs.VM.prototype.load=function(b,e,a){var d=this,c=new luajs.File(b);this._files.push(c);c.bind("loaded",function(f){d._trigger("loaded-file",c);if(e||e===undefined){d.execute(a,c)}});this._trigger("loading-file",c);c.load()};luajs.VM.prototype.execute=function(b,c){var g=this,f=c?[c]:this._files,a,c;if(!f.length){throw new Error("No files loaded.")}for(a in f){c=f[a];if(!c.data){throw new Error("Tried to execute file before data loaded.")}this._thread=new luajs.Function(this,c,c.data,this._globals);this._trigger("executing",[this._thread,b]);try{if(!b){this._thread.call()}else{var i=luajs.lib.coroutine.wrap(this._thread),d=function(){i();if(b.uiOnly&&i._coroutine.status!="dead"){window.setTimeout(d,1)}};d()}}catch(h){luajs.Error.catchExecutionError(h)}}};luajs.VM.prototype.setGlobal=function(a,b){this._globals[a]=b};var luajs=luajs||{};luajs.Closure=function(c,b,f,e,g){luajs.EventEmitter.call(this);this._vm=c;this._globals=e;this._file=b;this._data=f;this._upvalues=g||{};this._constants=f.constants;this._functions=f.functions;this._instructions=f.instructions;this._register=[];this._pc=0;this._localsUsedAsUpvalues=[];var d=this,a=function(){var j=[];for(var k=0,h=arguments.length;k<h;k++){j.push(arguments[k])}return d.execute(j)};a._instance=this;return a};luajs.Closure.prototype=new luajs.EventEmitter();luajs.Closure.prototype.constructor=luajs.Closure;luajs.Closure.prototype.execute=function(c){this._pc=0;if(this._data&&this._data.sourceName){luajs.stddebug.write("Executing "+this._data.sourceName+"...")}luajs.stddebug.write("\n");this._params=[].concat(c);this._register=[].concat(c.splice(0,this._data.paramCount));if(this._data.is_vararg==7){var b=[].concat(c),d=b.length;b=new luajs.Table(b);b.setMember("n",d);this._register.push(b)}try{return this._run()}catch(f){if(!((f||{}) instanceof luajs.Error)){var a=(f.stack||"");f=new luajs.Error("Error in host call: "+f.message);f.stack=a;f.luaStack=a.split("\n")}if(!f.luaStack){f.luaStack=[]}f.luaStack.push("at "+(this._data.sourceName||"function")+" on line "+this._data.linePositions[this._pc-1]);throw f}};luajs.Closure.prototype._run=function(){var d,o,e,k;this.terminated=false;if(luajs.debug.status=="resuming"){if(luajs.debug.resumeStack.length){this._pc--}else{luajs.debug.status="running"}}else{if(luajs.Coroutine._running&&luajs.Coroutine._running.status=="resuming"){if(luajs.Coroutine._running._resumeStack.length){this._pc--}else{luajs.Coroutine._running.status="running";luajs.stddebug.write("[coroutine resumed]\n");k=luajs.Coroutine._running._yieldVars}}}if(k){d=this._instructions[this._pc-1];var n=d.A,m=d.B,j=d.C,h=[];for(var g=0,f=k.length;g<f;g++){h.push(k[g])}if(j===0){f=h.length;for(g=0;g<f;g++){this._register[n+g]=h[g]}this._register.splice(n+f)}else{for(g=0;g<j-1;g++){this._register[n+g]=h[g]}}}while(d=this._instructions[this._pc]){o=this._data.linePositions[this._pc];this._pc++;e=this._executeInstruction(d,o);if(luajs.Coroutine._running&&luajs.Coroutine._running.status=="suspending"){luajs.Coroutine._running._resumeStack.push(this);if(luajs.Coroutine._running._func._instance==this){e=luajs.Coroutine._running._yieldVars;luajs.Coroutine._running.status="suspended";luajs.Coroutine._remove();luajs.stddebug.write("[coroutine suspended]\n");return e}return}if(luajs.debug.status=="suspending"&&!e){luajs.debug.resumeStack.push(this);return e}if(e!==undefined){this.terminated=true;return e}}this.terminated=true};luajs.Closure.prototype._executeInstruction=function(a,b){var f=this.constructor.OPERATIONS[a.op];if(!f){throw new Error("Operation not implemented! ("+a.op+")")}if(luajs.debug.status!="resuming"){var e="",c=this.constructor.OPERATION_NAMES[a.op];for(var d=0;d<this._index;d++){e+="\t"}luajs.stddebug.write(e+"["+this._pc+"]\t"+b+"\t"+c+"\t"+a.A+"\t"+a.B+(a.C!==undefined?"\t"+a.C:""))}return f.call(this,a.A,a.B,a.C)};luajs.Closure.prototype._getConstant=function(a){if(this._constants[a]===null){return}return this._constants[a]};(function(){function m(N,M){this._register[N]=this._register[M]}function b(M,N){this._register[M]=this._getConstant(N)}function q(N,M,O){this._register[N]=!!M;if(O){this._pc++}}function I(N,M){for(var O=N;O<=M;O++){this._register[O]=undefined}}function B(N,M){this._register[N]=this._upvalues[M].getValue()}function i(N,M){if(this._getConstant(M)=="_G"){this._register[N]=new luajs.Table(this._globals)}else{if(this._globals[this._getConstant(M)]!==undefined){this._register[N]=this._globals[this._getConstant(M)]}else{this._register[N]=undefined}}}function x(N,M,O){O=(O>=256)?this._getConstant(O-256):this._register[O];if(this._register[M]===undefined){throw new luajs.Error("Attempt to index a nil value ("+O+" not present in nil)")}else{if((this._register[M]||{}) instanceof luajs.Table){this._register[N]=this._register[M].getMember(O)}else{if(typeof this._register[M]=="string"&&luajs.lib.string[O]){this._register[N]=luajs.lib.string[O]}else{this._register[N]=this._register[M][O]}}}}function l(N,M){this._globals[this._getConstant(M)]=this._register[N]}function z(N,M){this._upvalues[M].setValue(this._register[N])}function v(N,M,O){M=(M>=256)?this._getConstant(M-256):this._register[M];O=(O>=256)?this._getConstant(O-256):this._register[O];if((this._register[N]||{}) instanceof luajs.Table){this._register[N].setMember(M,O)}else{if(this._register[N]===undefined){throw new luajs.Error("Attempt to index a missing field (can't set \""+M+'" on a nil value)')}else{this._register[N][M]=O}}}function D(N,M,O){this._register[N]=new luajs.Table()}function k(N,M,O){O=(O>=256)?this._getConstant(O-256):this._register[O];this._register[N+1]=this._register[M];if(this._register[M]===undefined){throw new luajs.Error("Attempt to index a nil value ("+O+" not present in nil)")}else{if((this._register[M]||{}) instanceof luajs.Table){this._register[N]=this._register[M].getMember(O)}else{if(typeof this._register[M]=="string"&&luajs.lib.string[O]){this._register[N]=luajs.lib.string[O]}else{this._register[N]=this._register[M][O]}}}}function g(N,M,T){M=(M>=256)?this._getConstant(M-256):this._register[M];T=(T>=256)?this._getConstant(T-256):this._register[T];var P=luajs.utils.toFloat,O,Q,R,S;if(((M||{}) instanceof luajs.Table&&(O=M.__luajs.metatable)&&(Q=O.getMember("__add")))||((T||{}) instanceof luajs.Table&&(O=T.__luajs.metatable)&&(Q=O.getMember("__add")))){this._register[N]=Q.apply([M,T])[0]}else{if(P(M)===undefined||P(T)===undefined){throw new luajs.Error("attempt to perform arithmetic on a non-numeric value")}this._register[N]=parseFloat(M)+parseFloat(T)}}function r(N,M,R){M=(M>=256)?this._getConstant(M-256):this._register[M];R=(R>=256)?this._getConstant(R-256):this._register[R];var P=luajs.utils.toFloat,O,Q;if(((M||{}) instanceof luajs.Table&&(O=M.__luajs.metatable)&&(Q=O.getMember("__sub")))||((R||{}) instanceof luajs.Table&&(O=R.__luajs.metatable)&&(Q=O.getMember("__sub")))){this._register[N]=Q.apply([M,R])[0]}else{if(P(M)===undefined||P(R)===undefined){throw new luajs.Error("attempt to perform arithmetic on a non-numeric value")}this._register[N]=parseFloat(M)-parseFloat(R)}}function d(N,M,R){M=(M>=256)?this._getConstant(M-256):this._register[M];R=(R>=256)?this._getConstant(R-256):this._register[R];var P=luajs.utils.toFloat,O,Q;if(((M||{}) instanceof luajs.Table&&(O=M.__luajs.metatable)&&(Q=O.getMember("__mul")))||((R||{}) instanceof luajs.Table&&(O=R.__luajs.metatable)&&(Q=O.getMember("__mul")))){this._register[N]=Q.apply([M,R])[0]}else{if(P(M)===undefined||P(R)===undefined){throw new luajs.Error("attempt to perform arithmetic on a non-numeric value")}this._register[N]=parseFloat(M)*parseFloat(R)}}function H(N,M,R){M=(M>=256)?this._getConstant(M-256):this._register[M];R=(R>=256)?this._getConstant(R-256):this._register[R];var P=luajs.utils.toFloat,O,Q;if(((M||{}) instanceof luajs.Table&&(O=M.__luajs.metatable)&&(Q=O.getMember("__div")))||((R||{}) instanceof luajs.Table&&(O=R.__luajs.metatable)&&(Q=O.getMember("__div")))){this._register[N]=Q.apply([M,R])[0]}else{if(P(M)===undefined||P(R)===undefined){throw new luajs.Error("attempt to perform arithmetic on a non-numeric value")}this._register[N]=parseFloat(M)/parseFloat(R)}}function h(N,M,R){M=(M>=256)?this._getConstant(M-256):this._register[M];R=(R>=256)?this._getConstant(R-256):this._register[R];var P=luajs.utils.toFloat,O,Q;if(((M||{}) instanceof luajs.Table&&(O=M.__luajs.metatable)&&(Q=O.getMember("__mod")))||((R||{}) instanceof luajs.Table&&(O=R.__luajs.metatable)&&(Q=O.getMember("__mod")))){this._register[N]=Q.apply([M,R])[0]}else{if(P(M)===undefined||P(R)===undefined){throw new luajs.Error("attempt to perform arithmetic on a non-numeric value")}this._register[N]=parseFloat(M)%parseFloat(R)}}function w(N,M,R){M=(M>=256)?this._getConstant(M-256):this._register[M];R=(R>=256)?this._getConstant(R-256):this._register[R];var P=luajs.utils.toFloat,O,Q;if(((M||{}) instanceof luajs.Table&&(O=M.__luajs.metatable)&&(Q=O.getMember("__pow")))||((R||{}) instanceof luajs.Table&&(O=R.__luajs.metatable)&&(Q=O.getMember("__pow")))){this._register[N]=Q.apply([M,R])[0]}else{if(P(M)===undefined||P(R)===undefined){throw new luajs.Error("attempt to perform arithmetic on a non-numeric value")}this._register[N]=Math.pow(parseFloat(M),parseFloat(R))}}function o(N,M){var O,P;if((this._register[M]||{}) instanceof luajs.Table&&(O=this._register[M].__luajs.metatable)&&(P=O.getMember("__unm"))){this._register[N]=P.apply([this._register[M]])[0]}else{M=this._register[M];if(luajs.utils.toFloat(M)===undefined){throw new luajs.Error("attempt to perform arithmetic on a non-numeric value")}this._register[N]=-parseFloat(M)}}function F(N,M){this._register[N]=!this._register[M]}function n(N,M){var P=0;if((this._register[M]||{}) instanceof luajs.Table){this._register[N]=luajs.lib.table.getn(this._register[M])}else{if(typeof this._register[M]=="object"){for(var O in this._register[M]){if(this._register[M].hasOwnProperty(O)){P++}}this._register[N]=P}else{if(this._register[M]==undefined){throw new luajs.Error("attempt to get length of a nil value")}else{if(this._register[M].length===undefined){this._register[N]=undefined}else{this._register[N]=this._register[M].length}}}}}function u(N,M,S){var R=this._register[S],O,Q;for(var P=S-1;P>=M;P--){if(((this._register[P]||{}) instanceof luajs.Table&&(O=this._register[P].__luajs.metatable)&&(Q=O.getMember("__concat")))||((R||{}) instanceof luajs.Table&&(O=R.__luajs.metatable)&&(Q=O.getMember("__concat")))){R=Q.apply([this._register[P],R])[0]}else{if(!(typeof this._register[P]==="string"||typeof this._register[P]==="number")||!(typeof R==="string"||typeof R==="number")){throw new luajs.Error("Attempt to concatenate a non-string or non-numeric value")}R=this._register[P]+R}}this._register[N]=R}function J(N,M){this._pc+=M}function G(O,N,S){N=(N>=256)?this._getConstant(N-256):this._register[N];S=(S>=256)?this._getConstant(S-256):this._register[S];var Q,P,R,M;if(N!==S&&(N||{}) instanceof luajs.Table&&(S||{}) instanceof luajs.Table&&(Q=N.__luajs.metatable)&&(P=S.__luajs.metatable)&&Q===P&&(R=Q.getMember("__eq"))){M=!!R.apply([N,S])[0]}else{M=(N===S)}if(M!=O){this._pc++}}function t(T,S,Q){S=(S>=256)?this._getConstant(S-256):this._register[S];Q=(Q>=256)?this._getConstant(Q-256):this._register[Q];var R=(typeof S!="object"&&typeof S)||((S||{}) instanceof luajs.Table&&"table")||"userdata",P=(typeof Q!="object"&&typeof S)||((Q||{}) instanceof luajs.Table&&"table")||"userdata",O,U,N,M;if(R!==P){throw new luajs.Error("attempt to compare "+R+" with "+P)}else{if(R=="table"){if((N=S.__luajs.metatable)&&(M=Q.__luajs.metatable)&&N===M&&(O=N.getMember("__lt"))){U=O.apply([S,Q])[0]}else{throw new luajs.Error("attempt to compare two table values")}}else{U=(S<Q)}}if(U!=T){this._pc++}}function C(T,S,Q){S=(S>=256)?this._getConstant(S-256):this._register[S];Q=(Q>=256)?this._getConstant(Q-256):this._register[Q];var R=(typeof S!="object"&&typeof S)||((S||{}) instanceof luajs.Table&&"table")||"userdata",P=(typeof Q!="object"&&typeof S)||((Q||{}) instanceof luajs.Table&&"table")||"userdata",O,U,N,M;if(R!==P){throw new luajs.Error("attempt to compare "+R+" with "+P)}else{if(R=="table"){if((N=S.__luajs.metatable)&&(M=Q.__luajs.metatable)&&N===M&&(O=N.getMember("__le"))){U=O.apply([S,Q])[0]}else{throw new luajs.Error("attempt to compare two table values")}}else{U=(S<=Q)}}if(U!=T){this._pc++}}function j(N,M,O){if(this._register[N]===0||this._register[N]===""){if(!O){this._pc++}}else{if(!this._register[N]!==!O){this._pc++}}}function e(N,M,O){if(!this._register[M]===!O){this._register[N]=this._register[M]}else{this._pc++}}function c(W,V,U){var T=[],Q,O,R,P,S,N,M;if(luajs.debug.status=="resuming"){P=luajs.debug.resumeStack.pop();if((P||{}) instanceof luajs.Coroutine){R=P.resume()}else{R=P._run()}}else{if(luajs.Coroutine._running&&luajs.Coroutine._running.status=="resuming"){P=luajs.Coroutine._running._resumeStack.pop();R=P._run()}else{if(V===0){O=this._register.length;for(Q=W+1;Q<O;Q++){T.push(this._register[Q])}}else{for(Q=0;Q<V-1;Q++){T.push(this._register[W+Q+1])}}}}if(!P){N=this._register[W];if((N||{}) instanceof luajs.Function){R=N.apply({},T,true)}else{if(N&&N.apply){R=N.apply({},T)}else{if(N&&(N||{}) instanceof luajs.Table&&(M=N.__luajs.metatable)&&(S=M.getMember("__call"))&&S.apply){T.unshift(N);R=S.apply({},T,true)}else{throw new luajs.Error("Attempt to call non-function")}}}}if(!((R||{}) instanceof Array)){R=[R]}if(luajs.Coroutine._running&&luajs.Coroutine._running.status=="suspending"){return}if(U===0){O=R.length;for(Q=0;Q<O;Q++){this._register[W+Q]=R[Q]}this._register.splice(W+O)}else{for(Q=0;Q<U-1;Q++){this._register[W+Q]=R[Q]}}}function L(N,M){return c.call(this,N,M,0)}function y(O,M){var P=[],R;if(M===0){N=this._register.length;for(R=O;R<N;R++){P.push(this._register[R])}}else{for(R=0;R<M-1;R++){P.push(this._register[O+R])}}for(var R=0,N=this._localsUsedAsUpvalues.length;R<N;R++){var Q=this._localsUsedAsUpvalues[R];Q.upvalue.value=this._register[Q.registerIndex];Q.upvalue.open=false;this._localsUsedAsUpvalues.splice(R--,1);N--;delete this._register[Q.registerIndex]}this.dead=true;return P}function p(N,M){this._register[N]+=this._register[N+2];var O=this._register[N+2]/Math.abs(this._register[N+2]);if((O===1&&this._register[N]<=this._register[N+1])||(O!==1&&this._register[N]>=this._register[N+1])){this._register[N+3]=this._register[N];this._pc+=M}}function K(N,M){this._register[N]-=this._register[N+2];this._pc+=M}function s(N,M,S){var Q=[this._register[N+1],this._register[N+2]],O=this._register[N].apply({},Q),P;if(!((O||{}) instanceof Array)){O=[O]}if(O[0]&&O[0]===""+(P=parseInt(O[0],10))){O[0]=P}for(var R=0;R<S;R++){this._register[N+R+3]=O[R]}if(this._register[N+3]!==undefined){this._register[N+2]=this._register[N+3]}else{this._pc++}}function f(N,M,Q){var P=M||this._register.length-N-1,O;for(O=0;O<P;O++){this._register[N].setMember(50*(Q-1)+O+1,this._register[N+O+1])}}function E(O,M,R){for(var Q=0,N=this._localsUsedAsUpvalues.length;Q<N;Q++){var P=this._localsUsedAsUpvalues[Q];if(P&&P.registerIndex>=O){P.upvalue.value=this._register[P.registerIndex];P.upvalue.open=false;this._localsUsedAsUpvalues.splice(Q--,1);N--;delete this._register[P.registerIndex]}}}function a(N,P){var O=this,Q=[],M;while((M=this._instructions[this._pc])&&(M.op===0||M.op===4)&&M.A===0){(function(){var U=M,V;luajs.stddebug.write("-> "+O.constructor.OPERATION_NAMES[U.op]+"\t"+U.A+"\t"+U.B+"\t"+U.C);if(U.op===0){for(var T=0,S=O._localsUsedAsUpvalues.length;T<S;T++){var R=O._localsUsedAsUpvalues[T];if(R.registerIndex===U.B){V=R.upvalue;break}}if(!V){V={open:true,getValue:function(){return this.open?O._register[U.B]:this.value},setValue:function(W){this.open?O._register[U.B]=W:this.value=W},name:O._functions[P].upvalues[Q.length]};O._localsUsedAsUpvalues.push({registerIndex:U.B,upvalue:V})}Q.push(V)}else{Q.push({getValue:function(){return O._upvalues[U.B].getValue()},setValue:function(W){O._upvalues[U.B].setValue(W)},name:O._upvalues[U.B].name})}})();this._pc++}this._register[N]=new luajs.Function(this._vm,this._file,this._functions[P],this._globals,Q)}function A(O,M){var P,N=M===0?this._params.length-this._data.paramCount:M-1;for(P=0;P<N;P++){this._register[O+P]=this._params[this._data.paramCount+P]}for(P=O+N;P<this._register.length;P++){delete this._register[P]}}luajs.Closure.OPERATIONS=[m,b,q,I,B,i,x,l,z,v,D,k,g,r,d,H,h,w,o,F,n,u,J,G,t,C,j,e,c,L,y,p,K,s,f,E,a,A];luajs.Closure.OPERATION_NAMES=["move","loadk","loadbool","loadnil","getupval","getglobal","gettable","setglobal","setupval","settable","newtable","self","add","sub","mul","div","mod","pow","unm","not","len","concat","jmp","eq","lt","le","test","testset","call","tailcall","return","forloop","forprep","tforloop","setlist","close","closure","vararg"]})();var luajs=luajs||{};luajs.Function=function(b,a,d,c,e){luajs.EventEmitter.call(this);this._vm=b;this._file=a;this._data=d;this._globals=c;this._upvalues=e||{};this._index=luajs.Function._index++};luajs.Function.prototype=new luajs.EventEmitter();luajs.Function.prototype.constructor=luajs.Function;luajs.Function._index=0;luajs.Function.prototype.getInstance=function(){return new luajs.Closure(this._vm,this._file,this._data,this._globals,this._upvalues)};luajs.Function.prototype.call=function(){var b=[],a=arguments.length,c;for(c=1;c<a;c++){b.push(arguments[c])}return this.apply(b)};luajs.Function.prototype.apply=function(f,b,a){if((f||{}) instanceof Array&&!b){b=f;f=undefined}var c=a?this.getInstance():luajs.lib.coroutine.wrap(this);try{return c.apply(f,b)}catch(d){luajs.Error.catchExecutionError(d)}};luajs.Function.prototype.toString=function(){return"function: 0x"+this._index.toString(16)};var luajs=luajs||{};luajs.Coroutine=function(a){luajs.EventEmitter.call(this);this._func=a.getInstance();this._index=luajs.Coroutine._index++;this._started=false;this._yieldVars=undefined;this._resumeStack=[];this.status="suspended";luajs.stddebug.write("[coroutine created]\n")};luajs.Coroutine.prototype=new luajs.EventEmitter();luajs.Coroutine.prototype.constructor=luajs.Function;luajs.Coroutine._index=0;luajs.Coroutine._stack=[];luajs.Coroutine._add=function(a){luajs.Coroutine._stack.push(luajs.Coroutine._running);luajs.Coroutine._running=a};luajs.Coroutine._remove=function(){luajs.Coroutine._running=luajs.Coroutine._stack.pop()};luajs.Coroutine.prototype.resume=function(){var b;try{if(this.status=="dead"){throw new luajs.Error("cannot resume dead coroutine")}luajs.Coroutine._add(this);if(luajs.debug.status=="resuming"){var g=luajs.debug.resumeStack.pop();if((g||{}) instanceof luajs.Coroutine){b=g.resume()}else{b=this._func._instance._run()}}else{if(!this._started){this.status="running";luajs.stddebug.write("[coroutine started]\n");this._started=true;b=this._func.apply({},arguments)}else{this.status="resuming";luajs.stddebug.write("[coroutine resuming]\n");var c=[];for(var d=0,a=arguments.length;d<a;d++){c.push(arguments[d])}this._yieldVars=c;b=this._resumeStack.pop()._run()}}if(luajs.debug.status=="suspending"){luajs.debug.resumeStack.push(this);return}this.status=this._func._instance.terminated?"dead":"suspended";if(b){b.unshift(true)}}catch(f){b=[false,f];this.status="dead"}if(this.status=="dead"){luajs.stddebug.write("[coroutine terminated]\n")}return b};luajs.Coroutine.prototype.toString=function(){return"thread: 0x"+this._index.toString(16)};var luajs=luajs||{};luajs.Table=function(f){var d=((f||{}) instanceof Array),c,e,b;for(b in f||{}){var a;c=d?parseInt(b,10)+1:b;e=f[b];if(typeof getQualifiedClassName!=="undefined"){a=((getQualifiedClassName(e)=="Object")&&(!(e instanceof luajs.Table))&&(!(e instanceof luajs.Coroutine))&&(!(e instanceof luajs.Function))&&(!(e instanceof luajs.Closure)))||(getQualifiedClassName(e)=="Array")}else{a=(typeof e=="object"&&e.constructor===Object)}if(a){this[c]=new luajs.Table(e)}else{this[c]=e}}this.__luajs={type:"table",index:++luajs.Table.count,keys:[],values:[]}};luajs.Table.count=0;luajs.Table.prototype.getMember=function(c){if(typeof c==="string"||typeof c==="number"){if(this[c]!==undefined){return this[c]}}else{var b=this.__luajs.keys.indexOf(c);if(b>=0){return this.__luajs.values[b]}}var a=this.__luajs.metatable;if(a&&a.__index){switch(a.__index.constructor){case luajs.Table:return a.__index.getMember(c);case Function:return a.__index(this,c);case luajs.Function:return a.__index.apply(this,[this,c])[0]}}};luajs.Table.prototype.setMember=function(c,e){var a=this.__luajs.metatable,d,b;if(this[c]===undefined&&a&&a.__newindex){switch(a.__newindex.constructor){case luajs.Table:return a.__newindex.setMember(c,e);case Function:return a.__newindex(this,c,e)}}if(typeof c==="string"||typeof c==="number"){this[c]=e}else{d=this.__luajs.keys;b=d.indexOf(c);if(b<0){b=d.length;d[b]=c}this.__luajs.values[b]=e}};luajs.Table.prototype.toString=function(){var a;if(this.constructor!=luajs.Table){return"userdata"}if(this.__luajs&&(a=this.__luajs.metatable)&&a.__tostring){return a.__tostring.call(undefined,this)}return"table: 0x"+this.__luajs.index.toString(16)};var luajs=luajs||{};luajs.Error=function(a){this.message=a};luajs.Error.prototype=new Error();luajs.Error.catchExecutionError=function(a){if(a instanceof luajs.Error){a.message=a.message+"\n    "+(a.luaStack||[]).join("\n    ")}throw a};luajs.Error.prototype.toString=function(){return"Luajs Error: "+this.message};var luajs=luajs||{};luajs.File=function(a){luajs.EventEmitter.call(this);this._url=a;this.data=undefined};luajs.File.prototype=new luajs.EventEmitter();luajs.File.prototype.constructor=luajs.File;luajs.File.prototype.load=function(){var a=this;jQuery.getJSON(this._url,function(b){a.data=b;a._trigger("loaded",b)})};luajs.File.prototype.loadLua=function(){};var luajs=luajs||{};(function(){var a={"([^a-zA-Z0-9%])-":"$1*?",".-([^a-zA-Z0-9])":"*?$1","(.)-$":"$1*?","%a":"[a-zA-Z]","%A":"[^a-zA-Z]","%c":"[\x00-\x1f]","%C":"[^\x00-\x1f]","%d":"\\d","%D":"[^\d]","%l":"[a-z]","%L":"[^a-z]","%p":"[.,\"'?!;:#$%&()*+-/<>=@[]\\^_{}|~]","%P":"[^.,\"'?!;:#$%&()*+-/<>=@[]\\^_{}|~]","%s":"[ \\t\\n\\f\\v\\r]","%S":"[^ \t\n\f\v\r]","%u":"[A-Z]","%U":"[^A-Z]","%w":"[a-zA-Z0-9]","%W":"[^a-zA-Z0-9]","%x":"[a-fA-F0-9]","%X":"[^a-fA-F0-9]","%([^a-zA-Z])":"\\$1"};function b(g){var h=0,e,c,f,d;for(e in a){g=g.replace(new RegExp(e,"g"),a[e])}c=g.length;for(e=0;e<c;e++){f=g.substr(e,1);d=false;if(f=="["){if(h){d=true}h++}else{if(f=="]"){h--;if(h){d=true}}}if(d){g=g.substr(0,e)+"\\"+g.substr(e++);c++}}return g}luajs.lib={assert:function(d,c){if(d===false||d===undefined){throw new luajs.Error(c||"Assertion failed!")}return[d,c]},collectgarbage:function(d,c){},dofile:function(c){},error:function(c){throw new luajs.Error(c)},getfenv:function(c){},getmetatable:function(c){if(!((c||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in getmetatable(). Table expected")}return c.__luajs.metatable},ipairs:function(d){if(!((d||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in ipairs(). Table expected")}var c=function(f,e){if(e===undefined){throw new luajs.Error("Bad argument #2 to ipairs() iterator")}if(!f.hasOwnProperty(e+1)){return undefined}return[e+1,f[e+1]]};return[c,d,0]},load:function(d,c){return[undefined,"Unimplemented"]},loadfile:function(c){return[undefined,"Unimplemented"]},loadstring:function(d,c){return[undefined,"Unimplemented"]},next:function(f,c){var g=(c==undefined),e;for(e in f){if(f.hasOwnProperty(e)&&!(e in luajs.Table.prototype)&&e!=="__luajs"){if(!g){if(e==c){g=true}}else{if(f.hasOwnProperty(e)&&f[e]!==undefined&&(""+e).substr(0,2)!="__"){return[e,f[e]]}}}}for(e in f.__luajs.keys){var d=f.__luajs.keys[e];if(!g){if(d===c){g=true}}else{if(f.__luajs.values[e]!==undefined){return[d,f.__luajs.values[e]]}}}return[]},pairs:function(c){if(!((c||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in pairs(). Table expected")}return[luajs.lib.next,c]},pcall:function(h){var f=[],c;for(var g=1,d=arguments.length;g<d;g++){f.push(arguments[g])}try{if(typeof h=="function"){c=h.apply({},f)}else{if((h||{}) instanceof luajs.Function){c=h.apply(f)}else{throw new luajs.Error("Attempt to call non-function")}}}catch(j){return[false,j.message]}if(!((c||{}) instanceof Array)){c=[c]}c.unshift(true);return c},print:function(){var d=[],f;for(var e=0,c=arguments.length;e<c;e++){f=arguments[e];if((f||{}) instanceof luajs.Table){d.push("table: 0x"+f.__luajs.index.toString(16))}else{if((f||{}) instanceof Function){d.push("JavaScript function: "+f.toString())}else{if(f===undefined){d.push("nil")}else{d.push(f)}}}}return luajs.stdout.write(d.join("\t"))},rawequal:function(d,c){return(d===c)},rawget:function(d,c){if(!((d||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in rawget(). Table expected")}return d.index},rawset:function(d,c,e){if(!((d||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in rawset(). Table expected")}if(c==undefined){throw new luajs.Error("Bad argument #2 in rawset(). Nil not allowed")}d[c]=e;return d},select:function(e){var d=[];if(e=="#"){return arguments.length-1}else{if(e=parseInt(e,10)){for(var f=e,c=arguments.length;f<c;f++){d.push(arguments[f])}return d}else{throw new luajs.Error('Bad argument #1 in select(). Number or "#" expected')}}},setmetatable:function(d,c){if(!((d||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in setmetatable(). Table expected")}if(!(c===undefined||(c||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #2 in setmetatable(). Nil or table expected")}d.__luajs.metatable=c;return d},tonumber:function(d,c){if(d==""){return}d=(""+d).replace(/^\s+|\s+$/g,"");c=c||10;if(c===2&&d.match(/[^01]/)){return}if(c===10&&d.match(/[^0-9e\+\-\.]/)){return}if(c===16&&d.match(/[^0-9A-Fa-f]/)){return}return(c==10)?parseFloat(d):parseInt(d,c)},tostring:function(c){return c===undefined?"nil":c.toString()},type:function(c){var d=typeof(c);switch(d){case"undefined":return"nil";case"number":case"string":case"boolean":return d;case"object":if((c||{}) instanceof luajs.Table){return"table"}if((c||{}) instanceof luajs.Function){return"function"}return"userdata"}},unpack:function(e,d,c){return luajs.lib.table.unpack(e,d,c)},_VERSION:"Lua 5.1",xpcall:function(f,d){var c,h;try{c=f.apply({});h=true}catch(g){c=d.apply({});if(((c||{}) instanceof Array)){c=c[0]}h=false}if(!((c||{}) instanceof Array)){c=[c]}c.unshift(h);return c}};luajs.lib.string={"byte":function(g,f,e){f=f||1;e=e||f;var c=[],h=g.length,d;for(d=f;d<=h&&d<=e;d++){c.push(g.charCodeAt(d-1)||undefined)}return c},"char":function(){var c="";for(var e=0,d=arguments.length;e<d;e++){c+=String.fromCharCode(arguments[e])}return c},dump:function(c){console.log(c);return JSON.stringify(c)},find:function(g,h,i,e){i=i||1;var d,f,c;if(e===undefined||!e){h=b(h);f=new RegExp(h);d=g.substr(i-1).search(f);if(d<0){return}c=g.substr(i-1).match(f);return[d+i,d+i+c[0].length-1,c[1]]}d=g.indexOf(h,i-1);return(d===-1)?undefined:[d+1,d+h.length]},format:function(d){var c={init:function(){if(typeof arguments=="undefined"){return null}if(arguments.length<1){return null}if(typeof arguments[0]!="string"){return null}if(typeof RegExp=="undefined"){return null}var n=arguments[0];var g=new RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g);var l=new Array();var p=new Array();var e=0;var m=0;var r=0;var h=0;var o="";var k=null;while(k=g.exec(n)){if(k[9]){e+=1}m=h;r=g.lastIndex-k[0].length;p[p.length]=n.substring(m,r);h=g.lastIndex;l[l.length]={match:k[0],left:k[3]?true:false,sign:k[4]||"",pad:k[5]||" ",min:k[6]||0,precision:k[8],code:k[9]||"%",negative:parseInt(arguments[e])<0?true:false,argument:String(arguments[e])}}p[p.length]=n.substring(h);if(l.length==0){return n}if((arguments.length-1)<e){return null}var f=null,k=null,j=null,q;for(j=0;j<l.length;j++){if(l[j].code=="%"){q="%"}else{if(l[j].code=="b"){l[j].argument=String(Math.abs(parseInt(l[j].argument)).toString(2));q=c.convert(l[j],true)}else{if(l[j].code=="c"){l[j].argument=String(String.fromCharCode(Math.abs(parseInt(l[j].argument))));q=c.convert(l[j],true)}else{if(l[j].code=="d"){l[j].argument=String(Math.abs(parseInt(l[j].argument)));q=c.convert(l[j])}else{if(l[j].code=="f"){l[j].argument=String(Math.abs(parseFloat(l[j].argument)).toFixed(l[j].precision?l[j].precision:6));q=c.convert(l[j])}else{if(l[j].code=="o"){l[j].argument=String(Math.abs(parseInt(l[j].argument)).toString(8));q=c.convert(l[j])}else{if(l[j].code=="s"){l[j].argument=l[j].argument.substring(0,l[j].precision?l[j].precision:l[j].argument.length);q=c.convert(l[j],true)}else{if(l[j].code=="x"){l[j].argument=String(Math.abs(parseInt(l[j].argument)).toString(16));q=c.convert(l[j])}else{if(l[j].code=="X"){l[j].argument=String(Math.abs(parseInt(l[j].argument)).toString(16));q=c.convert(l[j]).toUpperCase()}else{q=l[j].match}}}}}}}}}o+=p[j];o+=q}o+=p[j];return o},convert:function(f,h){if(h){f.sign=""}else{f.sign=f.negative?"-":f.sign}var e=f.min-f.argument.length+1-f.sign.length;var g=new Array(e<0?0:e).join(f.pad);if(!f.left){if(f.pad=="0"||h){return f.sign+g+f.argument}else{return g+f.sign+f.argument}}else{if(f.pad=="0"||h){return f.sign+f.argument+g.replace(/0/g," ")}else{return f.sign+f.argument+g}}}};return c.init.apply({},arguments)},gmatch:function(f,g){g=b(g);var e=new RegExp(g,"g"),d=f.match(e),c=0;return function(){return d[c++]}},gsub:function(e,i,h,j){i=b(i);var d=new RegExp(i),f=0,c="",g;while((j===undefined||f<j)&&e.match(i)){e=e.replace(d,"{:gsub-sep:}");e=e.split("{:gsub-sep:}");c+=e[0]+h;e=e[1];f++}return[c+e,f]},len:function(c){if(typeof c!="string"&&typeof c!="number"){throw new luajs.Error("bad argument #1 to 'len' (string expected, got "+typeof c+")")}return(""+c).length},lower:function(c){if(typeof c!="string"&&typeof c!="number"){throw new luajs.Error("bad argument #1 to 'lower' (string expected, got "+typeof c+")")}return(""+c).toLowerCase()},match:function(c,e,f){if(typeof c!="string"&&typeof c!="number"){throw new luajs.Error("bad argument #1 to 'match' (string expected, got "+typeof c+")")}if(typeof e!="string"&&typeof e!="number"){throw new luajs.Error("bad argument #2 to 'match' (string expected, got "+typeof c+")")}f=f?f-1:0;c=(""+c).substr(f);var d=c.match(new RegExp(b(e)));if(!d){return}if(!d[1]){return d[0]}d.shift();return d},rep:function(e,f){var c="",d;for(d=0;d<f;d++){c+=e}return c},reverse:function(e){var c="",d;for(d=e.length;d>=0;d--){c+=e.charAt(d)}return c},sub:function(e,d,c){if(typeof e!="string"&&typeof e!="number"){throw new luajs.Error("bad argument #1 to 'sub' (string expected, got "+typeof e+")")}e=""+e;d=d||1;c=c||e.length;if(d>0){d=d-1}else{if(d<0){d=e.length+d}}if(c<0){c=e.length+c+1}return e.substring(d,c)},upper:function(c){return c.toUpperCase()}};luajs.lib.table={concat:function(h,f,g,e){if(!((h||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in table.concat(). Table expected")}f=f||"";g=g||1;e=e||luajs.lib.table.maxn(h);var c=[],d;for(d=g;d<=e;d++){c.push(h[d])}return c.join(f)},getn:function(h){if(!((h||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in table.getn(). Table expected")}var g=[],e,f,d=0;for(f in h){if((e=0+parseInt(f,10))==f){g[e]=true}}while(g[d+1]){d++}if(d>0&&h[d]===undefined){var f=0;while(d-f>1){var c=Math.floor((f+d)/2);if(h[c]===undefined){d=c}else{f=c}}return f}return d},insert:function(e,d,f){if(!((e||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in table.insert(). Table expected")}if(f==undefined){f=d;d=1;while(e.getMember(d)!==undefined){d++}}var c=e.getMember(d);e.setMember(d,f);if(c){luajs.lib.table.insert(e,d+1,c)}},maxn:function(f){if(!((f||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in table.maxn(). Table expected")}var c=0,d,e;for(e in f){if((d=0+parseInt(e,10))==e&&f[e]!==null&&d>c){c=d}}return c},unpack:function(f,e,d){if(!((f||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in unpack(). Table expected")}e=e||1;if(d===undefined){d=luajs.lib.table.getn(f)}var g=[],c;for(c=e;c<=d;c++){g.push(f.getMember(c))}return g},remove:function(e,d){if(!((e||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 in table.remove(). Table expected")}if(d==undefined){d=1;while(e[d+1]!==undefined){d++}}if(d>luajs.lib.table.getn(e)){return}var c=e[d];e[d]=e[d+1];luajs.lib.table.remove(e,d+1);if(e[d]===undefined){delete e[d]}return c},sort:function(f,d){if(!((f||{}) instanceof luajs.Table)){throw new luajs.Error("Bad argument #1 to 'sort' (table expected)")}var g,c=[],h=function(j,i){return j<i?-1:1};if(d){if(!((d||{}) instanceof luajs.Function)){throw new luajs.Error("Bad argument #2 to 'sort' (function expected)")}h=function(j,i){return d.call({},j,i)[0]?-1:1}}for(var e=1;(g=f.getMember(e))!==undefined;e++){c.push(g)}c.sort(h);for(e in c){f.setMember(parseInt(e,10)+1,c[e])}}};luajs.lib.math={abs:function(c){return Math.abs(c)},acos:function(c){return Math.acos(c)},asin:function(c){return Math.asin(c)},atan:function(c){return Math.atan(c)},atan2:function(c,d){return Math.atan2(d,c)},ceil:function(c){return Math.ceil(c)},cos:function(c){return Math.cos(c)},cosh:function(c){},deg:function(c){},exp:function(c){return Math.exp(c)},floor:function(c){return Math.floor(c)},fmod:function(c,d){return c%d},frexp:function(c,d){},huge:Infinity,ldexp:function(c,d){return c*Math.pow(2,d)},log:function(d,e){var c=Math.log(d);if(e!==undefined){return c/Math.log(e)}return c},log10:function(c){return Math.log(c)/Math.log(10)},max:function(){var c=-Infinity,e=arguments.length,d;for(d=0;d<e;d++){if(arguments[d]>c){c=arguments[d]}}return c},min:function(){var d=Infinity,e=arguments.length,c;for(c=0;c<e;c++){if(arguments[c]<d){d=arguments[c]}}return d},modf:function(c){var e=Math.floor(c),d=c-e;return[e,d]},pi:Math.PI,pow:function(c,d){if((c=luajs.utils.toFloat(c))===undefined){throw new luajs.Error("bad argument #1 to 'pow' (number expected)")}if((d=luajs.utils.toFloat(d))===undefined){throw new luajs.Error("bad argument #2 to 'pow' (number expected)")}return Math.pow(c,d)},rad:function(c){if((c=luajs.utils.toFloat(c))===undefined){throw new luajs.Error("bad argument #1 to 'rad' (number expected)")}return(Math.PI/180)*c},random:function(d,c){if(d===undefined&&c===undefined){return Math.random()}if(typeof d!=="number"){throw new luajs.Error("bad argument #1 to 'random' (number expected)")}if(c===undefined){c=d;d=1}else{if(typeof c!=="number"){throw new luajs.Error("bad argument #2 to 'random' (number expected)")}}if(d>c){throw new luajs.Error("bad argument #2 to 'random' (interval is empty)")}return Math.floor(Math.random()*(c-d+1)+d)},randomseed:function(){},sin:function(c){return Math.sin(c)},sinh:function(c){},sqrt:function(c){return Math.sqrt(c)},tan:function(c){return Math.tan(c)},tanh:function(c){}};luajs.lib.io={write:function(){var e,c,d="";for(var e in arguments){var c=arguments[e];if(["string","number"].indexOf(typeof c)==-1){throw new luajs.Error("bad argument #"+e+" to 'write' (string expected, got "+typeof c+")")}d+=c}luajs.stdout.write(d)}};luajs.lib.os={clock:function(){},date:function(m,g){if(m===undefined){m="%c"}var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=["January","February","March","April","May","June","July","August","September","October","November","December"],c=[31,28,31,30,31,30,31,31,30,31,30,31],k=function(r,i){var p=parseInt(h["%j"](r),10),o=new Date(r.getFullYear(),0,1,12),q=(8-o["get"+l+"Day"]()+i)%7;return("0"+(Math.floor((p-q)/7)+1)).substr(-2)},h={"%a":function(i){return n[i["get"+l+"Day"]()].substr(0,3)},"%A":function(i){return n[i["get"+l+"Day"]()]},"%b":function(i){return e[i["get"+l+"Month"]()].substr(0,3)},"%B":function(i){return e[i["get"+l+"Month"]()]},"%c":function(i){return i["to"+l+"LocaleString"]()},"%d":function(i){return("0"+i["get"+l+"Date"]()).substr(-2)},"%H":function(i){return("0"+i["get"+l+"Hours"]()).substr(-2)},"%I":function(i){return("0"+((i["get"+l+"Hours"]()+11)%12+1)).substr(-2)},"%j":function(r){var p=r["get"+l+"Date"](),o=r["get"+l+"Month"]();for(var q=0;q<o;q++){p+=c[q]}if(o>1&&r["get"+l+"FullYear"]()%4===0){p+=1}return("00"+p).substr(-3)},"%m":function(i){return("0"+(i["get"+l+"Month"]()+1)).substr(-2)},"%M":function(i){return("0"+i["get"+l+"Minutes"]()).substr(-2)},"%p":function(i){return(i["get"+l+"Hours"]()<12)?"AM":"PM"},"%S":function(i){return("0"+i["get"+l+"Seconds"]()).substr(-2)},"%U":function(i){return k(i,0)},"%w":function(i){return""+(i["get"+l+"Day"]())},"%W":function(i){return k(i,1)},"%x":function(i){return h["%m"](i)+"/"+h["%d"](i)+"/"+h["%y"](i)},"%X":function(i){return h["%H"](i)+":"+h["%M"](i)+":"+h["%S"](i)},"%y":function(i){return h["%Y"](i).substr(-2)},"%Y":function(i){return""+i["get"+l+"FullYear"]()},"%Z":function(i){return l?"UTC":i.toString().substr(-4,3)},"%%":function(){return"%"}},l="",f=new Date();if(g){f.setTime(g*1000)}if(m.substr(0,1)==="!"){m=m.substr(1);l="UTC"}if(m==="*t"){var d=function(p){var o=p.getFullYear(),i=new Date(o,0);return(p.getTimezoneOffset()!==i.getTimezoneOffset())};return new luajs.Table({year:parseInt(h["%Y"](f),10),month:parseInt(h["%m"](f),10),day:parseInt(h["%d"](f),10),hour:parseInt(h["%H"](f),10),min:parseInt(h["%M"](f),10),sec:parseInt(h["%S"](f),10),wday:parseInt(h["%w"](f),10)+1,yday:parseInt(h["%j"](f),10),isdst:d(f)})}for(var j in h){if(m.indexOf(j)>=0){m=m.replace(j,h[j](f))}}return m},difftime:function(c,d){return c-d},execute:function(){if(arguments.length){throw new luajs.Error("shell is not available. You should always check first by calling os.execute with no parameters")}return 0},exit:function(){throw"Execution terminated."},getenv:function(){},remove:function(){},rename:function(){},setlocale:function(){},time:function(i){var e;if(!i){e=new Date()}else{var d,j,h,c,f,g;if(!(d=i.getMember("day"))){throw new luajs.Error("Field 'day' missing in date table")}if(!(j=i.getMember("month"))){throw new luajs.Error("Field 'month' missing in date table")}if(!(h=i.getMember("year"))){throw new luajs.Error("Field 'year' missing in date table")}c=i.getMember("hour")||12;f=i.getMember("min")||0;g=i.getMember("sec")||0;if(i.getMember("isdst")){c--}e=new Date(h,j-1,d,c,f,g)}return Math.floor(e.getTime()/1000)},tmpname:function(){}};luajs.lib.coroutine={create:function(c){return new luajs.Coroutine(c)},resume:function(c){var e=[];for(var f=1,d=arguments.length;f<d;f++){e.push(arguments[f])}return c.resume.apply(c,e)},running:function(){return luajs.Coroutine._running},status:function(c){return c.status},wrap:function(e){var d=luajs.lib.coroutine.create(e);var c=function(){var h=[d];for(var j=0,f=arguments.length;j<f;j++){h.push(arguments[j])}var g=luajs.lib.coroutine.resume.apply({},h),k=g.shift();if(k){return g}throw g[0]};c._coroutine=d;return c},yield:function(){if(!luajs.Coroutine._running){throw new luajs.Error("attempt to yield across metamethod/C-call boundary (not in coroutine)")}if(luajs.Coroutine._running.status!="running"){throw new luajs.Error("attempt to yield non-running coroutine in host")}var e=[],d=luajs.Coroutine._running;for(var f=0,c=arguments.length;f<c;f++){e.push(arguments[f])}d._yieldVars=e;d.status="suspending";return{resume:function(){var h=[d],j,g=arguments.length,k=function(){luajs.lib.coroutine.resume.apply(undefined,h)};for(j=0;j<g;j++){h.push(arguments[j])}if(d.status=="suspending"){window.setTimeout(k,1)}else{k()}}}}}})();var luajs=luajs||{};luajs.debug={};luajs.utils={toObject:function(d){var c=luajs.lib.table.getn(d)>0,a=c?[]:{},b;for(b in d){if(d.hasOwnProperty(b)&&!(b in luajs.Table.prototype)&&b!=="__luajs"){a[c?b-1:b]=((d[b]||{}) instanceof luajs.Table)?luajs.utils.toObject(d[b]):d[b]}}return a},parseJSON:function(a){var b=function(d){for(var c in d){if(typeof d[c]==="object"){d[c]=b(d[c])}else{if(d[c]===null){d[c]=undefined}}}return new luajs.Table(d)};return b(JSON.parse(a))},toFloat:function(a){var b=/^[-+]?[0-9]*\.?([0-9]+([eE][-+]?[0-9]+)?)?$/;if(!(""+a).match(b)){return}return parseFloat(a)}};var luajs=luajs||{};luajs.stdout={};luajs.stdout.write=function(a){if(console&&console.log){console.log(a)}else{if(trace){trace(a)}}};luajs.stddebug={};luajs.stddebug.write=function(a){};luajs.stderr={};luajs.stderr.write=function(a,b){b=b||"error";if(console&&console[b]){console[b](a)}};